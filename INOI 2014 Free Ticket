#include <iostream>
#include <vector>
#include <climits>
#include <queue>
using namespace std;

int main() {
    int c,f;
    cin>>c>>f;
    int arr[c+10][c+10];
    int arr2[c+10][c+10];
    for(int i=0;i<c;i++){
        for(int j=0;j<c;j++){
            if(i==j){
                arr[i][j] = 0;
            }else{
                arr[i][j] = 10100;
            }
        }
    }
    
    for(int i=0;i<f;i++){
        int x,y,z;
        cin>>x>>y>>z;
        arr[x-1][y-1] =z;
        arr[y-1][x-1] =z;
    }
    for(int i=0;i<c;i++){
        for(int j=0;j<c;j++){
            arr2[i][j] = arr[i][j];
        }
    }
    for(int i=0;i<c;i++){
        for(int j=0;j<c;j++){
            for(int k=0;k<c;k++){
                if(arr2[i][j]>arr2[i][k]+arr2[k][j]){
                    arr2[i][j]=arr2[i][k]+arr2[k][j];
                    //std::cout<<arr2[i][j]<<endl;
                }
            }
        }
    }
    int storemax = 0;
    for(int i=0;i<c;i++){
        for(int j=0;j<c;j++){
            storemax = max(storemax, arr2[i][j]);
        }
    }
    std::cout<<storemax;
  
}
